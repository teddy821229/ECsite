(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fd2d4f8"],{7780:function(t,i,e){},d2f1:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-container",[e("v-sheet",{staticClass:"mx-auto px-3 my-5",attrs:{elevation:"12","max-width":"1440",rounded:""}},[t.status.isLoading?e("div",{staticClass:"loading-box"},[e("half-circle-spinner",{attrs:{"animation-duration":1200,size:80,color:"#1A237E"}})],1):[e("v-row",[e("v-col",{attrs:{cols:"5"}},[e("v-img",{staticClass:"mx-auto my-4 rounded-lg",attrs:{"aspect-ratio":"1.7778",src:t.Item.image||"https://picsum.photos/id/"+(10+t.item.id)+"/500/300"}})],1),e("v-col",{staticClass:"pl-5 my-3",attrs:{cols:"7"}},[e("div",{staticClass:"text-h5 font-weight-black"},[t._v(" "+t._s(t.Item.name)+" ")]),e("div",{staticClass:"row align-center mt-5 ml-1"},[e("div",{staticClass:"rating"},[t._v(t._s(t.Item.rating))]),e("v-rating",{staticClass:"mb-1",attrs:{"half-increments":"",length:"5",color:"amber","background-color":"grey lighten-1",dense:"",readonly:"",small:""},model:{value:t.Item.rating,callback:function(i){t.$set(t.Item,"rating",i)},expression:"Item.rating"}})],1),e("div",{staticClass:"amount text-h6 mt-10"},[t._v(" 售價: "),e("span",{staticClass:"ml-5"},[t._v(t._s(t._f("moneyFilter")(t.Item.price))+" / 個")])]),e("div",{staticClass:"quantity-container d-flex align-center mt-2"},[e("div",{staticClass:"text text-h6 mt-5"},[t._v("數量：")]),e("v-text-field",{staticClass:"ml-3 text-h6",attrs:{"hide-details":"",type:"number",disabled:0===t.Item.stock},on:{blur:t.checkQuantity},model:{value:t.quantity,callback:function(i){t.quantity=t._n(i)},expression:"quantity"}},[e("v-icon",{staticClass:"button",attrs:{slot:"append-outer",color:"grey"},on:{click:t.addQuantity},slot:"append-outer"},[t._v("mdi-plus")]),e("v-icon",{staticClass:"button",attrs:{slot:"prepend",color:"grey"},on:{click:t.minusQuantity},slot:"prepend"},[t._v("mdi-minus")])],1),e("div",{staticClass:"stock mt-5 ml-5"},[t._v("還剩 "+t._s(t.Item.stock)+" 個")])],1),e("v-divider",{staticClass:"mt-5"}),e("div",{staticClass:"total text-h6 mt-5"},[t._v(" 總金額： "),e("span",[t._v(t._s(t._f("moneyFilter")(t.quantity*t.Item.price)))])]),e("div",{staticClass:"button-container mt-10"},[e("v-btn",{staticClass:"px-10 py-6 mr-5",attrs:{color:"pink",outlined:""},on:{click:t.toggleLiked}},[e("v-icon",[t._v(t._s(t.isLiked?"mdi-heart":"mdi-heart-outline"))]),t._v(t._s(t.isLiked?"取消收藏":"加入收藏")+" ")],1),e("v-btn",{staticClass:"px-10 py-6 mr-5",attrs:{color:"indigo",outlined:"",disabled:0===t.Item.stock},on:{click:t.addToCart}},[e("v-icon",[t._v("mdi-cart-plus")]),t._v(" 加入購物車")],1)],1)],1)],1)]],2)],1)},a=[],n=e("5530"),o=(e("d81d"),e("b0c0"),e("2f62")),c=e("c968"),r=e("11c1"),d=e("369b"),l=e.n(d),m=e("2708"),u=e("4583"),h="https://docs.google.com/spreadsheets/d/e/2PACX-1vT54r-aPFDVkBm3KfUCm3C1N6kwcAN7fVqFzsUc2IKShjEpO3TQjKPKY2zUbkeQkQD6OaQ56CyR0ECC/pub?gid=0&single=true&output=csv",v={name:"Product",components:{HalfCircleSpinner:u["a"]},mixins:[m["a"]],data:function(){return{Item:{id:-1,name:"",rating:0,price:0,stock:0},quantity:1,status:{isLoading:!0}}},created:function(){var t=this.$route.params.id;this.fetchProduct(t)},beforeRouteUpdate:function(t,i,e){var s=t.params.id;this.fetchProduct(s),e()},computed:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["user","itemInCart","likes"])),{},{isInCart:function(){var t=this;return this.itemInCart.some((function(i){return i.Item.id===t.Item.id}))},isLiked:function(){var t=this;return this.likes.some((function(i){return i.id===t.Item.id}))}}),methods:{fetchProduct:function(t){var i=this;l.a.parse(h,{download:!0,header:!0,dynamicTyping:!0,complete:function(e){e.data.map((function(s){t>e.data.length?c["a"].fire({icon:"error",title:"該商品不存在"}):s.id==t&&(i.Item=Object(n["a"])(Object(n["a"])({},i.Item),s))})),i.status.isLoading=!1}})},addQuantity:function(){this.quantity!==this.Item.stock&&(this.quantity+=1)},minusQuantity:function(){0!==this.quantity&&(this.quantity-=1)},checkQuantity:function(){this.quantity>this.Item.stock&&(this.quantity=this.Item.stock),this.quantity<0&&(this.quantity=1)},toggleLiked:function(){var t=this;-1!==this.user.id?this.likes.some((function(i){return i.id===t.Item.id}))?this.$store.commit("removeLike",this.Item):this.$store.commit("setLike",this.Item):c["a"].fire({icon:"error",title:"無法加入收藏，請先登入"})},addToCart:function(){if(-1!==this.user.id)if(this.isInCart)c["a"].fire({icon:"warning",title:"商品已經在購物車內！"});else{var t={id:Object(r["v4"])(),Item:{id:this.Item.id,name:this.Item.name,image:this.Item.image,price:this.Item.price,stock:this.Item.stock},quantity:this.quantity};this.$store.commit("setCartItem",t),c["a"].fire({icon:"success",title:"加入購物車成功！"})}else c["a"].fire({icon:"error",title:"無法加入購物車，請先登入"})}}},p=v,f=(e("f1a6"),e("2877")),g=e("6544"),k=e.n(g),y=e("8336"),C=e("62ad"),I=e("a523"),b=e("ce7e"),_=e("132d"),x=e("adda"),q=e("1d4d"),w=e("0fd9"),V=e("8dd9"),L=e("8654"),Q=Object(f["a"])(p,s,a,!1,null,null,null);i["default"]=Q.exports;k()(Q,{VBtn:y["a"],VCol:C["a"],VContainer:I["a"],VDivider:b["a"],VIcon:_["a"],VImg:x["a"],VRating:q["a"],VRow:w["a"],VSheet:V["a"],VTextField:L["a"]})},f1a6:function(t,i,e){"use strict";e("7780")}}]);
//# sourceMappingURL=chunk-4fd2d4f8.3cea35cb.js.map