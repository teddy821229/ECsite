{"version":3,"sources":["webpack:///./src/components/UserSettingForm.vue?e4ff","webpack:///./src/components/UserSettingForm.vue?38c9","webpack:///src/components/UserSettingForm.vue","webpack:///./src/components/UserSettingForm.vue?92c2","webpack:///./src/components/UserSettingForm.vue?9f87"],"names":["render","_vm","this","_h","$createElement","_c","_self","status","staticClass","attrs","ref","model","value","callback","$$v","valid","expression","userData","$set","nameRules","scopedSlots","_u","key","fn","on","_g","_b","menu","Date","now","getTimezoneOffset","toISOString","substr","save","sexChoices","v","emailRules","same","cancelEdit","_v","staticRenderFns","name","components","HalfCircleSpinner","data","created","fetchUser","userId","methods","download","header","dynamicTyping","complete","phone","user","$refs","date","computed","lists","every","component","VBtn","VContainer","VDatePicker","VForm","VMenu","VRow","VSelect","VSheet","VSpacer","VTextField"],"mappings":"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","file":"js/chunk-545930b9.a258a5e6.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSettingForm.vue?vue&type=style&index=0&id=29df158a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-sheet',[(_vm.status.isLoading)?_c('div',{staticClass:\"loading-box\"},[_c('half-circle-spinner',{attrs:{\"animation-duration\":1200,\"size\":80,\"color\":\"#1A237E\"}})],1):[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"required\":\"\",\"readonly\":\"\",\"label\":\"帳號：\"},model:{value:(_vm.userData.account),callback:function ($$v) {_vm.$set(_vm.userData, \"account\", $$v)},expression:\"userData.account\"}}),_c('v-text-field',{attrs:{\"label\":\"姓名：\",\"rules\":_vm.nameRules,\"clearable\":\"\",\"required\":\"\"},model:{value:(_vm.userData.username),callback:function ($$v) {_vm.$set(_vm.userData, \"username\", $$v)},expression:\"userData.username\"}}),_c('v-menu',{ref:\"menu\",attrs:{\"close-on-content-click\":false,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"auto\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-text-field',_vm._g(_vm._b({attrs:{\"label\":\"生日：\",\"readonly\":\"\"},model:{value:(_vm.userData.birthday),callback:function ($$v) {_vm.$set(_vm.userData, \"birthday\", $$v)},expression:\"userData.birthday\"}},'v-text-field',attrs,false),on))]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('v-date-picker',{attrs:{\"no-title\":\"\",\"active-picker\":\"YEAR\",\"max\":new Date(Date.now() - new Date().getTimezoneOffset() * 60000)\n                .toISOString()\n                .substr(0, 10),\"min\":\"1950-01-01\"},on:{\"change\":_vm.save},model:{value:(_vm.userData.birthday),callback:function ($$v) {_vm.$set(_vm.userData, \"birthday\", $$v)},expression:\"userData.birthday\"}})],1),_c('v-select',{attrs:{\"items\":_vm.sexChoices,\"rules\":[function (v) { return !!v || '需選擇性別'; }],\"label\":\"性別：\"},model:{value:(_vm.userData.sex),callback:function ($$v) {_vm.$set(_vm.userData, \"sex\", $$v)},expression:\"userData.sex\"}}),_c('v-text-field',{attrs:{\"label\":\"手機號碼\",\"rules\":[function (v) { return !!v || '手機號碼不能為空白'; }],\"clearable\":\"\"},model:{value:(_vm.userData.phone),callback:function ($$v) {_vm.$set(_vm.userData, \"phone\", $$v)},expression:\"userData.phone\"}}),_c('v-text-field',{attrs:{\"label\":\"電子信箱：\",\"rules\":_vm.emailRules,\"clearable\":\"\",\"required\":\"\"},model:{value:(_vm.userData.email),callback:function ($$v) {_vm.$set(_vm.userData, \"email\", $$v)},expression:\"userData.email\"}}),_c('v-row',{staticClass:\"my-3\"},[_c('v-spacer'),_c('v-btn',{staticClass:\"mr-4\",attrs:{\"color\":\"primary\",\"outlined\":\"\",\"disabled\":_vm.same},on:{\"click\":_vm.cancelEdit}},[_vm._v(\" 取消修改 \")]),_c('v-btn',{staticClass:\"mr-4\",attrs:{\"disabled\":_vm.same || !_vm.valid,\"color\":\"primary\"}},[_vm._v(\" 儲存修改 \")])],1)],1)]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-sheet>\n      <div v-if=\"status.isLoading\" class=\"loading-box\">\n        <half-circle-spinner\n          :animation-duration=\"1200\"\n          :size=\"80\"\n          color=\"#1A237E\"\n        />\n      </div>\n      <template v-else>\n        <v-form ref=\"form\" v-model=\"valid\">\n          <v-text-field\n            v-model=\"userData.account\"\n            required\n            readonly\n            label=\"帳號：\"\n          ></v-text-field>\n\n          <v-text-field\n            v-model=\"userData.username\"\n            label=\"姓名：\"\n            :rules=\"nameRules\"\n            clearable\n            required\n          ></v-text-field>\n\n          <v-menu\n            ref=\"menu\"\n            v-model=\"menu\"\n            :close-on-content-click=\"false\"\n            transition=\"scale-transition\"\n            offset-y\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"userData.birthday\"\n                label=\"生日：\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              ></v-text-field>\n            </template>\n\n            <v-date-picker\n              no-title\n              v-model=\"userData.birthday\"\n              active-picker=\"YEAR\"\n              :max=\"\n                new Date(Date.now() - new Date().getTimezoneOffset() * 60000)\n                  .toISOString()\n                  .substr(0, 10)\n              \"\n              min=\"1950-01-01\"\n              @change=\"save\"\n            ></v-date-picker>\n          </v-menu>\n\n          <v-select\n            v-model=\"userData.sex\"\n            :items=\"sexChoices\"\n            :rules=\"[(v) => !!v || '需選擇性別']\"\n            label=\"性別：\"\n          ></v-select>\n\n          <v-text-field\n            v-model=\"userData.phone\"\n            label=\"手機號碼\"\n            :rules=\"[(v) => !!v || '手機號碼不能為空白']\"\n            clearable\n          ></v-text-field>\n\n          <v-text-field\n            v-model=\"userData.email\"\n            label=\"電子信箱：\"\n            :rules=\"emailRules\"\n            clearable\n            required\n          ></v-text-field>\n\n          <v-row class=\"my-3\">\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"primary\"\n              class=\"mr-4\"\n              outlined\n              @click=\"cancelEdit\"\n              :disabled=\"same\"\n            >\n              取消修改\n            </v-btn>\n            <v-btn :disabled=\"same || !valid\" color=\"primary\" class=\"mr-4\">\n              儲存修改\n            </v-btn>\n          </v-row>\n        </v-form>\n      </template>\n    </v-sheet>\n  </v-container>\n</template>\n\n<script>\nimport Papa from \"papaparse\";\nimport { HalfCircleSpinner } from \"epic-spinners\";\nimport { mapState } from 'vuex'\n\nconst UserURL =\n  \"https://docs.google.com/spreadsheets/d/e/2PACX-1vT54r-aPFDVkBm3KfUCm3C1N6kwcAN7fVqFzsUc2IKShjEpO3TQjKPKY2zUbkeQkQD6OaQ56CyR0ECC/pub?gid=1020618966&single=true&output=csv\";\n\nexport default {\n  name: \"UserSettingForm\",\n  components: {\n    HalfCircleSpinner,\n  },\n  data: () => ({\n    userData: {\n      account: \"\",\n      username: \"\",\n      sex: \"\",\n      birthday: \"\",\n      phone: \"\",\n      email: \"\",\n    },\n    userCached: {\n      account: \"\",\n      username: \"\",\n      sex: \"\",\n      birthday: \"\",\n      phone: \"\",\n      email: \"\",\n    },\n    valid: true,\n    menu: false,\n    nameRules: [(v) => !!v || \"姓名不能空白\"],\n    emailRules: [\n      (v) => !!v || \"信箱不能空白\",\n      (v) => /.+@.+/.test(v) || \"信箱格式不正確\",\n    ],\n    sexChoices: [\"生理男\", \"生理女\", \"不透露\"],\n    status: {\n      isLoading: true,\n    },\n  }),\n  created() {\n    const userId = this.user.id\n    this.fetchUser(userId);\n  },\n  methods: {\n    fetchUser(id) {\n      Papa.parse(UserURL, {\n        download: true,\n        header: true,\n        dynamicTyping: true,\n        complete: (results) => {\n          const user = results.data.find((user) => user.id == id);\n          this.userData = {\n            ...this.userData,\n            ...user,\n            phone: \"0\" + user.phone\n          };\n          this.userCached = {\n            ...this.userCached,\n            ...user,\n            phone: \"0\" + user.phone\n          };\n          this.status.isLoading = false\n        },\n      });\n    },\n    save(date) {\n      this.$refs.menu.save(date);\n    },\n    cancelEdit() {\n      this.userData = {\n        ...this.userData,\n        ...this.userCached,\n      };\n    },\n  },\n  computed: {\n    same() {\n      let lists = [\"username\", \"sex\", \"birthday\", \"phone\", \"email\"];\n      return lists.every((list) => this.userData[list] === this.userCached[list]);\n    },\n    ...mapState(['user'])\n  },\n};\n</script>\n\n<style scoped>\n.loading-box {\n  height: 400px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSettingForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSettingForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSettingForm.vue?vue&type=template&id=29df158a&scoped=true&\"\nimport script from \"./UserSettingForm.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSettingForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSettingForm.vue?vue&type=style&index=0&id=29df158a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29df158a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDatePicker } from 'vuetify/lib/components/VDatePicker';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VContainer,VDatePicker,VForm,VMenu,VRow,VSelect,VSheet,VSpacer,VTextField})\n"],"sourceRoot":""}