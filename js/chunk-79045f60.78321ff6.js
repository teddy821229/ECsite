(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79045f60"],{"0e2a":function(t,e,i){"use strict";i("c8be")},"13fd":function(t,e,i){},"15e6":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"mx-4 my-6 product-card",attrs:{"max-width":"220"}},[i("v-img",{attrs:{height:"146",src:t.item.image||"https://picsum.photos/id/"+(10+t.item.id)+"/500/300","lazy-src":"https://picsum.photos/id/11/100/60"}}),i("div",{staticClass:"card-section"},[i("v-card-title",{staticClass:"text-title"},[t._v(t._s(t.item.name))]),i("v-card-title",{staticClass:"text-subtitle"},[t._v(" NTD"+t._s(t._f("moneyFilter")(t.item.price)))])],1),i("v-card-text",{staticClass:"pt-1 pb-0 description-part"},[i("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[i("v-rating",{attrs:{value:t.item.rating,color:"amber",dense:"","half-increments":"",readonly:"",size:"14"}}),i("div",{staticClass:"grey--text ms-4"},[t._v(t._s(t.item.rating))])],1)],1),i("v-card-actions",{staticClass:"mx-2 mt-3 mb-1"},[i("v-spacer"),i("v-btn",{attrs:{icon:"",color:t.isLiked?"pink":"grey"},on:{click:t.toggleLiked}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:"",color:t.isInCart?"primary":"grey"},on:{click:t.addToCart}},[i("v-icon",[t._v("mdi-cart")])],1),i("router-link",{staticClass:"ml-3",attrs:{to:{name:"product",params:{id:t.item.id}}}},[i("v-btn",{attrs:{elevation:"4",color:"primary"}},[t._v("現在購買")])],1)],1)],1)},n=[],r=i("5530"),s=(i("b0c0"),i("7db0"),i("c968")),o=i("2f62"),c=i("11c1"),l=i("2708"),u={name:"ProductsCard",mixins:[l["a"]],props:{initialItem:{type:Object,required:!0}},watch:{initialItem:{handler:function(t){this.item=Object(r["a"])(Object(r["a"])({},this.item),t)},deep:!0}},created:function(){this.fetchItem()},data:function(){return{item:{id:-1,name:"",price:0,stock:50}}},methods:{fetchItem:function(){this.item=Object(r["a"])(Object(r["a"])({},this.item),this.initialItem)},toggleLiked:function(){var t=this;-1!==this.user.id?this.likes.some((function(e){return e.id===t.item.id}))?this.$store.commit("removeLike",this.item):this.$store.commit("setLike",this.item):s["a"].fire({icon:"error",title:"無法加入收藏，請先登入"})},addToCart:function(){if(-1!==this.user.id)if(this.isInCart)s["a"].fire({icon:"warning",title:"商品已經在購物車內！"});else{var t={id:Object(c["v4"])(),Item:{id:this.item.id,name:this.item.name,image:"",price:this.item.price,stock:this.item.stock},quantity:1};this.$store.commit("setCartItem",t),s["a"].fire({icon:"success",title:"加入購物車成功！"})}else s["a"].fire({icon:"error",title:"無法新增至購物車，請先登入"})}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["user","itemInCart","likes"])),{},{isInCart:function(){var t=this;return this.itemInCart.find((function(e){return e.Item.id===t.item.id}))},isLiked:function(){var t=this;return this.likes.some((function(e){return e.id===t.item.id}))}})},d=u,h=(i("2d0e"),i("2877")),f=i("6544"),m=i.n(f),v=i("8336"),p=i("b0af"),g=i("99d9"),b=i("132d"),y=i("adda"),w=i("1d4d"),I=i("0fd9"),x=i("2fa4"),C=Object(h["a"])(d,a,n,!1,null,"318e2e9e",null);e["a"]=C.exports;m()(C,{VBtn:v["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VIcon:b["a"],VImg:y["a"],VRating:w["a"],VRow:I["a"],VSpacer:x["a"]})},"17b3":function(t,e,i){},"2a7f":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var a=i("71d9"),n=i("80d2"),r=Object(n["f"])("v-toolbar__title"),s=Object(n["f"])("v-toolbar__items");a["a"]},"2d0e":function(t,e,i){"use strict";i("13fd")},"4bd4":function(t,e,i){"use strict";var a=i("5530"),n=(i("caad"),i("2532"),i("07ac"),i("4de4"),i("159b"),i("7db0"),i("58df")),r=i("7e2b"),s=i("3206");e["a"]=Object(n["a"])(r["a"],Object(s["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},a={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?a.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(t._uid)||(a.valid=i(t)))})):a.valid=i(t),a},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(a["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"6f80":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.searchResult.apply(null,arguments)}}},[i("v-container",[i("v-row",[i("v-col",{staticClass:"d-flex search-row"},[i("v-text-field",{attrs:{label:"搜尋商品",placeholder:"請輸入關鍵字",outlined:"","hide-details":""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),i("v-btn",{staticClass:"ml-2 my-2",attrs:{type:"submit",text:"",height:"40px"}},[t._v(" 搜尋 ")]),i("v-btn",{staticClass:"mr-1 my-2",attrs:{color:"red",text:"",type:"button",height:"40px"},on:{click:t.cleanSearch}},[t._v(" 清除 ")])],1)],1)],1)],1)},n=[],r={name:"SearchingBar",props:{target:{type:String,required:!0}},data:function(){return{keyword:""}},methods:{searchResult:function(){if(document.documentElement.scrollTop=0,this.keyword!==this.$route.query.keyword){if("likes"===this.target)return this.$router.push({name:this.target,query:{keyword:this.keyword}}),void this.$emit("after-search",this.keyword.toLowerCase());this.$router.push({name:this.target,query:{filterId:1,seriesId:"all",keyword:this.keyword}}),this.$emit("after-search",this.keyword.toLowerCase())}},cleanSearch:function(){if(document.documentElement.scrollTop=0,""!==this.keyword){if(this.keyword="","likes"===this.target)return this.$router.push({name:this.target,query:{keyword:""}}),void this.$emit("after-search","");this.$router.push({name:this.target,query:{filterId:1,seriesId:"all",keyword:""}}),this.$emit("after-search","")}}}},s=r,o=i("2877"),c=i("6544"),l=i.n(c),u=i("8336"),d=i("62ad"),h=i("a523"),f=i("4bd4"),m=i("0fd9"),v=i("8654"),p=Object(o["a"])(s,a,n,!1,null,"4b150c51",null);e["a"]=p.exports;l()(p,{VBtn:u["a"],VCol:d["a"],VContainer:h["a"],VForm:f["a"],VRow:m["a"],VTextField:v["a"]})},"74f5":function(t,e,i){"use strict";i("7e9a")},"7e9a":function(t,e,i){},c8be:function(t,e,i){},e6dc:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-sheet",{staticClass:"mx-auto px-3 my-5",attrs:{elevation:"12","max-width":"1200",rounded:""}},[i("v-row",[i("ProductsCategoryList",{attrs:{"series-list":t.seriesList,filterId:t.selectFilter,searchInput:t.searchInput,"is-loading":t.status.isLoading},on:{"after-change-category":t.afterChangeCategory}}),i("v-divider",{attrs:{vertical:""}}),i("v-col",{attrs:{cols:"9"}},[i("SearchingBar",{attrs:{target:"products"},on:{"after-search":t.afterSearch}}),i("v-divider"),i("v-sheet",{staticClass:"my-5 py-3 px-5 d-flex align-center",attrs:{elevation:"4",height:"80px"}},[i("div",{staticClass:"text mr-5"},[t._v("篩選")]),i("div",{staticClass:"chips-container"},[t._l(t.tags,(function(e){return i("v-btn",{key:e.id,staticClass:"mx-1",attrs:{depressed:"",rounded:"","exact-active-class":"indigo white--text",exact:"",to:{name:"products",query:{filterId:e.id,seriesId:t.selectSeries,keyword:t.searchInput}}},on:{click:function(i){t.selectFilter=e.id}}},[t._v(" "+t._s(e.name)+" ")])})),i("v-spacer")],2),i("v-btn",{attrs:{icon:""},on:{click:t.toggleSort}},["ascending"===t.sort?i("v-icon",[t._v("mdi-sort-ascending")]):i("v-icon",[t._v("mdi-sort-descending")])],1)],1),i("v-divider"),t.status.isLoading?i("div",{staticClass:"loading-box"},[i("half-circle-spinner",{attrs:{"animation-duration":1200,size:80,color:"#1A237E"}})],1):[i("v-container",{staticClass:"product-container px-3"},t._l(t.afterPaginate,(function(t){return i("ProductsCard",{key:t.id,attrs:{"initial-item":t}})})),1),i("div",{staticClass:"text-center"},[i("v-pagination",{attrs:{length:t.totalPage},model:{value:t.showIndex.nowPage,callback:function(e){t.$set(t.showIndex,"nowPage",e)},expression:"showIndex.nowPage"}})],1)]],2)],1)],1)],1)},n=[],r=i("5530"),s=(i("4e827"),i("a9e3"),i("159b"),i("7db0"),i("4de4"),i("caad"),i("2532"),i("b0c0"),i("fb6a"),i("369b")),o=i.n(s),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-col",{attrs:{cols:"3"}},[i("v-toolbar",{attrs:{color:"indigo",dark:""}},[i("v-toolbar-title",[t._v("商品分類")])],1),i("v-list",[i("v-list-item",{attrs:{link:"","exact-active-class":"indigo white--text",exact:"",to:{name:"products",query:{filterId:t.filterId,seriesId:"all",keyword:t.searchInput}}},on:{click:function(e){return t.handleChange("all")}}},[i("v-list-item-title",[t._v("全部商品")])],1),t.isLoading?i("div",{staticClass:"loading-box"},[i("half-circle-spinner",{attrs:{"animation-duration":1200,size:80,color:"#1A237E"}})],1):t._l(t.seriesList,(function(e){return i("v-list-group",{key:e.id,attrs:{value:t.querySeriesMatch(e.id),"active-class":"indigo lighten-4"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",[i("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)]},proxy:!0}],null,!0)},[i("v-list-item",{staticClass:"pl-10",attrs:{"exact-active-class":"indigo white--text",exact:"",to:{name:"products",query:{filterId:t.filterId,seriesId:e.id,keyword:""}}},on:{click:function(i){return t.handleChange(e.id)}}},[i("v-list-item-content",[i("v-list-item-title",[t._v(" 全部")])],1)],1),t._l(e.Items,(function(e){return i("v-list-item",{key:e.id,staticClass:"pl-10",attrs:{"exact-active-class":"indigo white--text","active-class":"",exact:"",to:{name:"products",query:{filterId:t.filterId,seriesId:e.id,keyword:""}}},on:{click:function(i){return t.handleChange(e.id)}}},[i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1)}))],2)}))],2)],1)},l=[],u=i("4583"),d={name:"ProductsCategoryList",components:{HalfCircleSpinner:u["a"]},props:{filterId:{type:Number,required:!0},searchInput:{type:String,default:""},seriesList:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0}},data:function(){return{}},methods:{handleChange:function(t){this.$emit("after-change-category",t)}},computed:{querySeriesMatch:function(){return function(t){var e=this.$route.query.seriesId;return e.includes(t)}}}},h=d,f=(i("0e2a"),i("2877")),m=i("6544"),v=i.n(m),p=i("62ad"),g=i("8860"),b=i("56b0"),y=i("da13"),w=i("5d23"),I=i("71d9"),x=i("2a7f"),C=Object(f["a"])(h,c,l,!1,null,"2ffc3bb3",null),k=C.exports;v()(C,{VCol:p["a"],VList:g["a"],VListGroup:b["a"],VListItem:y["a"],VListItemContent:w["a"],VListItemTitle:w["c"],VToolbar:I["a"],VToolbarTitle:x["a"]});var _=i("6f80"),$=i("15e6"),L=i("2f62"),V="https://docs.google.com/spreadsheets/d/e/2PACX-1vT54r-aPFDVkBm3KfUCm3C1N6kwcAN7fVqFzsUc2IKShjEpO3TQjKPKY2zUbkeQkQD6OaQ56CyR0ECC/pub?gid=11022087&single=true&output=csv",P="https://docs.google.com/spreadsheets/d/e/2PACX-1vT54r-aPFDVkBm3KfUCm3C1N6kwcAN7fVqFzsUc2IKShjEpO3TQjKPKY2zUbkeQkQD6OaQ56CyR0ECC/pub?gid=0&single=true&output=csv",S={name:"Products",components:{ProductsCategoryList:k,SearchingBar:_["a"],ProductsCard:$["a"],HalfCircleSpinner:u["a"]},data:function(){return{tags:[{id:1,code:"latest",name:"最新上市",rules:function(t,e){return"ascending"===e?t.sort((function(t,e){return e.releaseDate-t.releaseDate})):t.sort((function(t,e){return t.releaseDate-e.releaseDate}))}},{id:3,code:"rating",name:"綜合評分",rules:function(t,e){return"ascending"===e?t.sort((function(t,e){return e.rating-t.rating})):t.sort((function(t,e){return t.rating-e.rating}))}},{id:4,code:"price",name:"價格",rules:function(t,e){return"ascending"===e?t.sort((function(t,e){return e.price-t.price})):t.sort((function(t,e){return t.price-e.price}))}}],items:[],seriesList:[],selectFilter:1,selectSeries:"all",sort:"ascending",searchInput:"",showIndex:{nowPage:1,perPage:9},status:{isLoading:!0}}},watch:{showIndex:{handler:function(){document.documentElement.scrollTop=0},deep:!0}},created:function(){this.fetchProducts();var t=this.$route.query,e=t.filterId,i=void 0===e?"":e,a=t.seriesId,n=void 0===a?"":a;this.selectSeries=n,this.selectFilter=Number(i),this.fetchList()},beforeRouteUpdate:function(t,e,i){var a=t.query,n=a.filterId,r=void 0===n?"":n,s=a.seriesId,o=void 0===s?"":s;this.selectSeries=o,this.selectFilter=Number(r),document.documentElement.scrollTop=0,i()},methods:{fetchProducts:function(){var t=this;o.a.parse(P,{download:!0,header:!0,dynamicTyping:!0,complete:function(e){e.data.forEach((function(e){t.items.push(Object(r["a"])(Object(r["a"])({},e),{},{releaseDate:new Date(e.releaseDate)}))}))}})},fetchList:function(){var t=this;o.a.parse(V,{download:!0,header:!0,dynamicTyping:!0,complete:function(e){e.data.forEach((function(e){if(t.seriesList.some((function(t){return t.id===e.seriesId}))){var i=t.seriesList.find((function(t){return t.id===e.seriesId}));i.Items.push({id:e.ipId,title:e.ipName})}else t.seriesList.push({id:e.seriesId,title:e.seriesName,Items:[{id:e.ipId,title:e.ipName}]})})),t.status.isLoading=!1}})},toggleSort:function(){return"ascending"===this.sort?(this.sort="descending",void(this.showIndex.nowPage=1)):"descending"===this.sort?(this.sort="ascending",void(this.showIndex.nowPage=1)):void 0},afterChangeCategory:function(t){this.selectSeries=t,this.searchInput="",this.showIndex.nowPage=1},afterSearch:function(t){this.selectSeries="all",this.selectFilter=1,this.searchInput=t,this.showIndex.nowPage=1}},computed:Object(r["a"])(Object(r["a"])({},Object(L["b"])(["user"])),{},{filterProducts:function(){var t=this,e=this.items;e=e.filter((function(e){return e.name.toLowerCase().includes(t.searchInput)})),"all"!==this.selectSeries&&(e=e.filter((function(e){return e.series.includes(t.selectSeries)})));var i=this.tags.find((function(e){return e.id===t.selectFilter}));return e=i.rules(e,this.sort),e},afterPaginate:function(){return this.filterProducts.slice((this.showIndex.nowPage-1)*this.showIndex.perPage,this.showIndex.nowPage*this.showIndex.perPage)},totalPage:function(){return Math.ceil(this.filterProducts.length/this.showIndex.perPage)}})},O=S,j=(i("74f5"),i("8336")),B=i("a523"),E=i("ce7e"),T=i("132d"),q=i("2909"),A=(i("99af"),i("d3b7"),i("25f0"),i("d81d"),i("17b3"),i("9d26")),N=i("dc22"),z=i("a9ad"),D=i("de2c"),F=i("7560"),R=i("58df"),K=Object(R["a"])(z["a"],Object(D["a"])({onVisible:["init"]}),F["a"]).extend({name:"v-pagination",directives:{Resize:N["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return Object(r["a"])({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var i=e%2===0?1:0,a=Math.floor(e/2),n=this.length-a+1+i;if(this.value>a&&this.value<n){var r=1,s=this.length,o=this.value-a+2,c=this.value+a-2-i,l=o-1===r+1?2:"...",u=c+1===s-1?c+1:"...";return[1,l].concat(Object(q["a"])(this.range(o,c)),[u,this.length])}if(this.value===a){var d=this.value+a-1-i;return[].concat(Object(q["a"])(this.range(1,d)),["...",this.length])}if(this.value===n){var h=this.value-a+1;return[1,"..."].concat(Object(q["a"])(this.range(h,this.length)))}return[].concat(Object(q["a"])(this.range(1,a)),["..."],Object(q["a"])(this.range(n,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var i=[];t=t>0?t:1;for(var a=t;a<=e;a++)i.push(a);return i},genIcon:function(t,e,i,a,n){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":i},attrs:{disabled:i,type:"button","aria-label":n},on:i?{}:{click:a}},[t(A["a"],[e])])])},genItem:function(t,e){var i=this,a=e===this.value&&(this.color||"primary"),n=e===this.value,r=n?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(a,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":n,"aria-label":this.$vuetify.lang.t(r,e)},on:{click:function(){return i.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map((function(i,a){return t("li",{key:a},[isNaN(Number(i))?t("span",{class:"v-pagination__more"},[i.toString()]):e.genItem(t,i)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}}),M=i("0fd9"),Q=i("8dd9"),U=i("2fa4"),H=Object(f["a"])(O,a,n,!1,null,"b9243236",null);e["default"]=H.exports;v()(H,{VBtn:j["a"],VCol:p["a"],VContainer:B["a"],VDivider:E["a"],VIcon:T["a"],VPagination:K,VRow:M["a"],VSheet:Q["a"],VSpacer:U["a"]})}}]);
//# sourceMappingURL=chunk-79045f60.78321ff6.js.map